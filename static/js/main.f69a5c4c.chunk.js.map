{"version":3,"sources":["utils.ts","components/ImageCard/ImageCard.tsx","components/ViewSingle/ViewSingle.tsx","components/App/App.tsx","reportWebVitals.ts","index.tsx"],"names":["utils","url","slice","indexOf","ImageCard","imgSrc","description","className","loading","src","alt","ViewSingle","props","location","useLocation","history","useHistory","imageId","useRef","pathname","goBack","image","current","$","window","scrollTop","onClick","download_url","author","App","id","useState","elements","setElements","loaded","setLoaded","a","fetch","response","json","images","console","log","newElements","i","length","push","error","getImageCard","to","useEffect","getImages","addEventListener","maxHeight","height","map","imageArray","elementsArray","newImage","scrollDownListener","find","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.f69a5c4c.chunk.js","sourcesContent":["export const utils = {\r\n    normalizeUrl: (url: string): string => {\r\n    return url.slice(0, url.indexOf('/', 8));\r\n    }\r\n}","import './ImageCard.css';\r\n\r\ninterface Props {\r\n    imgSrc: string;\r\n    description: string;\r\n    url: string;\r\n}\r\n\r\nfunction ImageCard({\r\n    imgSrc = '',\r\n    description = '',\r\n    url = '',\r\n}: Partial<Props>) {\r\n    return (\r\n        <div className=\"image-card\">\r\n            <img\r\n                loading=\"lazy\"\r\n                src={\r\n                    imgSrc ||\r\n                    'https://miro.medium.com/max/1024/1*Pzwe6jKF3Wb4fRHXPdZXyw.png'\r\n                }\r\n                alt=\"deno\"\r\n            />\r\n            <div className=\"body\">\r\n                <div className=\"description\">{description}</div>\r\n                <span>{url}</span>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ImageCard;\r\n","import React, { useRef } from 'react';\r\nimport { useHistory, useLocation } from 'react-router-dom';\r\nimport { ImageJson } from '../App/App';\r\nimport { GrClose } from 'react-icons/gr';\r\nimport './ViewSingle.css';\r\nimport { utils } from '../../utils';\r\n\r\ninterface Props {\r\n    image?: ImageJson;\r\n}\r\n\r\nfunction ViewSingle(props: Props) {\r\n    const location = useLocation();\r\n    const history = useHistory();\r\n    const imageId = useRef(location.pathname);\r\n\r\n    if (props.image && imageId.current !== location.pathname) {\r\n        $(window).scrollTop(0);\r\n    }\r\n\r\n    imageId.current = location.pathname;\r\n\r\n    function goBack() {\r\n        history.goBack();\r\n    }\r\n\r\n    return (\r\n        <div className=\"view-image\">\r\n            {props.image && (\r\n                <div>\r\n                    <GrClose className=\"close\" onClick={goBack} />\r\n                    <img src={props.image.download_url} alt=\"view single\" />\r\n                    <div className=\"details\">\r\n                        <div className=\"top\">\r\n                            <div>\r\n                                <div className=\"title\">\r\n                                    {utils.normalizeUrl(props.image.url)}\r\n                                </div>\r\n                                <div className=\"description\">\r\n                                    {props.image.author}\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"go-back-button\">\r\n                                <button onClick={goBack}>Go Back</button>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"copyright\">\r\n                            Images may be subject to copyright.\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"hr\"></div>\r\n                    <div className=\"related-images\">Related images</div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ViewSingle;\r\n","import React, { useEffect, useState } from 'react';\nimport { Link, useLocation } from 'react-router-dom';\nimport { utils } from '../../utils';\nimport ImageCard from '../ImageCard/ImageCard';\nimport ViewSingle from '../ViewSingle/ViewSingle';\nimport './App.css';\n\nexport interface ImageJson {\n    id: string;\n    author: string;\n    url: string;\n    download_url: string;\n    height: number;\n    width: number;\n}\n\nfunction App() {\n    const [elements, setElements] = useState<ImageJson[][]>([[], []]);\n    const [loaded, setLoaded] = useState<boolean>(false);\n    const location = useLocation();\n\n    async function getImages() {\n        try {\n            const response = await fetch(\n                'https://picsum.photos/v2/list?list=50'\n            );\n            const images: ImageJson[] = await response.json();\n            console.log(images);\n            const newElements: ImageJson[][] = [[], []];\n            for (let i = 0; i < images.length; i++) {\n                newElements[i % 2].push(images[i]);\n            }\n            setElements(newElements);\n            setLoaded(true);\n        } catch (error) {\n            console.error('FAILED TO GET IMAGES');\n            console.error(error);\n        }\n    }\n\n    function findImageById(id: string): ImageJson | undefined {\n        return (\n            elements[0].find((image) => image.id === id) ||\n            elements[1].find((image) => image.id === id)\n        );\n    }\n\n    function scrollDownListener() {\n        function addFrontToBack(\n            imageArray: ImageJson[],\n            i: number,\n            elementsArray: ImageJson[][]\n        ): ImageJson[] {\n            const newImage = elementsArray[(i + 1) % 2][imageArray.length - 15];\n            // we keep the same reference for the event listener, so we have to modify the array in place\n            imageArray.push({ ...newImage, id: newImage.id + 'x' });\n            return imageArray;\n        }\n\n        const maxHeight = $('#root').height()! - $(window).height()!;\n        const scrollTop = $(window).scrollTop()!;\n\n        if (elements[0].length && scrollTop >= maxHeight - 400) {\n            const newElements = elements.map(addFrontToBack);\n            setElements(newElements);\n        }\n    }\n\n    function getImageCard(image: ImageJson) {\n        return (\n            <Link key={image.id + 'l'} to={image.id}>\n                <ImageCard\n                    key={image.id}\n                    imgSrc={image.download_url}\n                    description={image.author}\n                    url={utils.normalizeUrl(image.url)}\n                />\n            </Link>\n        );\n    }\n\n    useEffect(() => {\n        getImages();\n    }, []);\n\n    useEffect(() => {\n        if (loaded) {\n            window.addEventListener('scroll', () => {\n                scrollDownListener();\n            });\n        }\n        // this depends on elements, but it doesn't need to keep in\n        // sync, since it only adds a scroll listener on load.\n        //\n        // eslint-disable-next-line\n    }, [loaded]);\n\n    return (\n        <div className=\"app\">\n            <ViewSingle image={findImageById(location.pathname.slice(1))} />\n            <div className=\"row\">\n                <div className=\"column\">\n                    {elements[0].map((image) => getImageCard(image))}\n                </div>\n                <div className=\"column\">\n                    {elements[1].map((image) => getImageCard(image))}\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App/App';\nimport reportWebVitals from './reportWebVitals';\nimport { HashRouter } from 'react-router-dom';\n\nReactDOM.render(\n    <React.StrictMode>\n        <HashRouter>\n            <App />\n        </HashRouter>\n    </React.StrictMode>,\n    document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}